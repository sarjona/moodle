define(["core/yui"],function(e){let t=function(){this.prototype.view=null,this.prototype.nodes=null};return{init:function(){e.use("yui2-treeview",function(e){t.view=new e.YUI2.widget.TreeView("settings_tree_div"),(t.nodes=[]).root=t.view.getRoot()})},addNodes:function(i,n,o,d,s){e.use("yui2-treeview",function(e){let l=i.length;for(let r=0;r<l;r++){let l=i[r],g=n[r],u=decodeURIComponent(o[r]),p=decodeURIComponent(d[r]),h=s[r],c=new e.YUI2.widget.HTMLNode(u,t.nodes[h]);c.settingId=l,c.setNodesProperty("title",p),c.highlightState=1,t.nodes[g]=c}})},render:function(){e.use("yui2-treeview",function(e){let i=t.view.getNodesByProperty("settingId","category");if(i)for(let e=0;e<i.length;e++)i[e].hasChildren()||t.view.popNode(i[e]);if(i=t.view.getRoot().children)for(let e=0;e<i.length;e++)i[e].hasChildren()||t.view.popNode(i[e]);t.view.setNodesProperty("propagateHighlightUp",!0),t.view.setNodesProperty("propagateHighlightDown",!0),t.view.subscribe("clickEvent",t.view.onEventToggleHighlight),t.view.render(),e.YUI2.util.Event.on("id_admin_presets_submit","click",function(){let i=document.getElementById("id_admin_presets_submit").parentNode,n=t.view.getNodesByProperty("highlightState",1);if(e.YUI2.lang.isNull(n))e.YUI2.log("Nothing selected");else{let t=[];for(let e=0;e<n.length;e++){let o=n[e];if("category"!==o.settingId&&"page"!==o.settingId&&(t.push(o.settingId),!document.getElementById(o.settingId))){let e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name",o.settingId),e.setAttribute("value","1"),i.appendChild(e)}}e.YUI2.log("Checked settings:\n"+t.join("\n"),"info")}})})}}});