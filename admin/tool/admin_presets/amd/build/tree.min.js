define ("tool_admin_presets/tree",["core/yui","core/ajax"],function(a,b){var c=function(){this.view=null;this.nodes=null};c.prototype.init=function(){var b=this;return new Promise(function(c){a.use("yui2-treeview",function(a){b.view=new a.YUI2.widget.TreeView("settings_tree_div");b.nodes=[];b.nodes.root=b.view.getRoot();c(!0)})})};c.prototype.addNodes=function(b,c,d,e,f){var g=this;return new Promise(function(h){a.use("yui2-treeview",function(a){for(var j=b.length,k=0;k<j;k++){var l=b[k],m=c[k],n=decodeURIComponent(d[k]),o=decodeURIComponent(e[k]),p=f[k],q=new a.YUI2.widget.HTMLNode(n,g.nodes[p]);q.settingId=l;q.setNodesProperty("title",o);q.highlightState=1;g.nodes[m]=q;h(!0)}})})};c.prototype.render=function(){var b=this;a.use("yui2-treeview",function(a){var c=b.view.getNodesByProperty("settingId","category");if(c){for(var d=0;d<c.length;d++){if(!c[d].hasChildren()){b.view.popNode(c[d])}}}c=b.view.getRoot().children;if(c){for(var e=0;e<c.length;e++){if(!c[e].hasChildren()){b.view.popNode(c[e])}}}b.view.setNodesProperty("propagateHighlightUp",!0);b.view.setNodesProperty("propagateHighlightDown",!0);b.view.subscribe("clickEvent",b.view.onEventToggleHighlight);b.view.render();a.YUI2.util.Event.on("id_admin_presets_submit","click",function(){var c=document.getElementById("id_admin_presets_submit").parentNode,d=b.view.getNodesByProperty("highlightState",1);if(a.YUI2.lang.isNull(d)){a.YUI2.log("Nothing selected")}else{for(var e=[],f=0,g;f<d.length;f++){g=d[f];if("category"!==g.settingId&&"page"!==g.settingId){e.push(g.settingId);if(!document.getElementById(g.settingId)){var h=document.createElement("input");h.setAttribute("type","hidden");h.setAttribute("name",g.settingId);h.setAttribute("value","1");c.appendChild(h)}}}a.YUI2.log("Checked settings:\n"+e.join("\n"),"info")}})})};return{init:function init(a,d){b.call([{methodname:"tool_admin_presets_get_settings",args:{action:a,id:d}}],!0,!0)[0].done(function(a){var b=new c;b.init().finally(function(){b.addNodes(a.ids,a.nodes,a.labels,a.descriptions,a.parents).finally(function(){b.render()})})})}}});
//# sourceMappingURL=tree.min.js.map
